# RejectionManagementOperations.md

## Описание системных операций

Данный документ описывает операции, которые используются для реализации прецедента "Управление отказами". Каждая операция связана с компонентами диаграммы и их методами.

---

### 1. Операция: `getApplicationByID(applicationID: UUID)`

#### Ссылка:
- Прецедент: "Управление отказами".
- Компонент: `ApplicationManager`.

#### **Предусловия**
1. Заявка существует в системе и имеет статус "На рассмотрении".
2. Пользователь (FundHolder) аутентифицирован и имеет доступ к заявкам.

#### **Действия**
1. Компонент `ApplicationManager` принимает ID заявки (`applicationID`) в качестве аргумента.
2. Метод `getApplicationByID` запрашивает данные из хранилища заявок.
3. Система возвращает объект `Application`, содержащий информацию о заявке.

#### **Постусловия**
- Объект `Application` успешно загружен, включая атрибуты:
  - `ID`: уникальный идентификатор заявки.
  - `Title`: название заявки.
  - `Description`: описание заявки.
  - `Status`: текущий статус заявки.

---

### 2. Операция: `getEvaluation(applicationID: UUID)`

#### Ссылка:
- Прецедент: "Управление отказами".
- Компонент: `ExpertiseManager`.

#### **Предусловия**
1. Заявка прошла этап экспертной оценки.
2. Оценка сохранена в системе через `ExpertiseManager`.

#### **Действия**
1. `ExpertiseManager` принимает ID заявки (`applicationID`) в качестве аргумента.
2. Метод `getEvaluation` извлекает объект `Evaluation`, связанный с заявкой.
3. Оценка включает:
   - `Score`: балл заявки.
   - `Comments`: комментарии эксперта.

#### **Постусловия**
- Объект `Evaluation` успешно извлечен и передан для анализа держателю фонда.

---

### 3. Операция: `makeDecision(applicationID: UUID, decision: Decision)`

#### Ссылка:
- Прецедент: "Управление отказами".
- Компонент: `DecisionManager`.

#### **Предусловия**
1. Заявка загружена через `getApplicationByID`.
2. Держатель фонда готов принять решение.

#### **Действия**
1. Метод `makeDecision` принимает два аргумента:
   - `applicationID`: ID заявки.
   - `decision`: объект решения (`Decision`).
2. Система создает объект `Decision`:
   - `ID`: уникальный идентификатор решения.
   - `DecisionType`: тип решения ("Отклонено").
   - `Reason`: причина отказа.
   - `Application`: ссылка на заявку.
3. Решение сохраняется в системе через `DecisionManager`.

#### **Постусловия**
- Объект `Decision` сохранен, а заявка обновлена до статуса "Отклонена".

---

### 4. Операция: `sendNotification(notification: Notification)`

#### Ссылка:
- Прецедент: "Управление отказами".
- Компонент: `NotificationManager`.

#### **Предусловия**
1. Решение сохранено через `makeDecision`.
2. Уведомление подготовлено в виде объекта `Notification`.

#### **Действия**
1. Метод `sendNotification` принимает объект `Notification` с атрибутами:
   - `Message`: текст уведомления с причиной отказа.
   - `Recipient`: пользователь (заявитель), связанный с заявкой.
   - `Date`: дата отправки уведомления.
2. Уведомление отправляется заявителю через выбранный канал связи (например, e-mail).

#### **Постусловия**
- Уведомление доставлено заявителю.
- Лог уведомления сохранен для аудита.

---

### 5. Операция: `updateApplication(applicationID: UUID, updatedApplication: Application)`

#### Ссылка:
- Прецедент: "Управление отказами".
- Компонент: `ApplicationManager`.

#### **Предусловия**
1. Система содержит объект заявки с текущим статусом.
2. Заявка готова к обновлению.

#### **Действия**
1. Метод `updateApplication` принимает:
   - `applicationID`: ID заявки.
   - `updatedApplication`: обновленный объект заявки.
2. Статус заявки обновляется на "Отклонена".
3. Система сохраняет изменения.

#### **Постусловия**
- Заявка обновлена.
- Лог изменения сохранен для отчетности.

---

### 6. Операция: `generateReport(reportType: String, parameters: Map<String, Object>)`

#### Ссылка:
- Прецедент: "Управление отказами".
- Компонент: `ReportManager`.

#### **Предусловия**
1. Система содержит данные о принятых решениях.

#### **Действия**
1. Метод принимает:
   - `reportType`: тип отчета (например, "Отказы").
   - `parameters`: параметры фильтрации данных.
2. `ReportManager` собирает информацию из `DecisionManager` и `ApplicationManager`.
3. Система создает объект `Report`:
   - `Title`: заголовок отчета.
   - `Content`: данные о принятых решениях.
   - `GeneratedBy`: пользователь, инициировавший отчет.

#### **Постусловия**
- Отчет сгенерирован и доступен для анализа.

---

### Общие замечания:
1. Все операции логируются через `ReportManager`.
2. Ошибки при выполнении операций должны обрабатываться через механизмы уведомлений (например, через `NotificationManager`).
3. Связь между объектами (`Application`, `Decision`, `Notification`) обеспечивается через их уникальные идентификаторы (`UUID`).

---

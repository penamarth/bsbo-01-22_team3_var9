# Прецедент: "Оценка заявки"

**Информационная система технической экспертизы.**

**Уровень**: Задача, определенная пользователем.

**Основной исполнитель**: Эксперт.

## Заинтересованные лица и их требования:

- **Эксперт**: Хочет иметь удобный интерфейс для оценки заявок, возможность оставить комментарии и применить установленную систему критериев оценки.
- **Держатель фонда**: Хочет получить данные об оценках заявок для принятия решения о выдаче грантов.
- **Соискатель гранта**: Ожидает прозрачности и справедливости процесса оценки заявки.
- **Администратор системы**: Хочет убедиться, что оценки соответствуют заданным критериям, и предотвратить конфликты интересов.

## Предусловия:

- Эксперт зарегистрирован и аутентифицирован в системе.
- Заявка назначена эксперту для оценки.
- Критерии оценки и весовые коэффициенты заданы держателем фонда и видны эксперту.

## Результаты (Постусловия):

- Эксперт завершил оценку заявки, проставив баллы по критериям и оставив комментарии.
- Оценки и комментарии сохранены в базе данных и доступны для анализа держателем фонда.
- Система уведомляет держателя фонда о завершении оценки.

## Основной успешный сценарий:

1. **Начало оценки**:
    - Эксперт входит в систему и переходит к разделу "Новые заявки".
    - Система отображает список заявок, назначенных эксперту, включая базовую информацию о заявке (заголовок, цель, заявитель).

2. **Просмотр заявки**:
    - Эксперт выбирает заявку из списка.
    - Система отображает полную информацию о заявке и форму для ввода оценок по критериям.

3. **Проставление оценок**:
    - Эксперт заполняет форму, выставляя баллы по каждому критерию.
    - Эксперт может добавить комментарий для уточнения своего решения.
    - Система проверяет корректность введённых данных (например, соответствие диапазону баллов).

4. **Сохранение результатов**:
    - Эксперт нажимает кнопку "Завершить оценку".
    - Система сохраняет оценки и комментарии в базе данных и помечает заявку как "Оценена".

5. **Уведомление держателя фонда**:
    - Система уведомляет держателя фонда о завершении оценки через метод `notifyHolder(fund_id, message)`.

## Варианты альтернативных решений:

* **1.1 Эксперт обнаруживает недостаток информации в заявке**:
    1. Эксперт оставляет комментарий с указанием на недостаток.
    2. Система отправляет уведомление соискателю для уточнения заявки.
    3. После получения ответа эксперт завершает оценку.

* **2.1 Эксперт хочет изменить ранее сохранённую оценку**:
    1. Эксперт открывает заявку с пометкой "Оценена".
    2. Система позволяет редактировать баллы и комментарии до момента закрытия оценки держателем фонда.

* **3.1 Сбой при сохранении результатов**:
    1. Система уведомляет эксперта о сбое и предлагает повторить попытку.
    2. Если сбой сохраняется, эксперт сообщает об ошибке администратору системы.

## Расширения (или альтернативные потоки):

*а. **Коллективная оценка**:
1. Заявка назначена группе экспертов.
2. Каждый эксперт оценивает заявку отдельно.
3. Система вычисляет средний балл по каждому критерию и отображает итоговую оценку.

*б. **Анализ конфликта интересов**:
1. Система автоматически проверяет, связан ли эксперт с соискателем (например, по базе данных связей).
2. Если конфликт обнаружен, заявка переназначается другому эксперту.

## Специальные требования:

- Система должна поддерживать шифрование данных для обеспечения конфиденциальности.
- Оценки должны быть автоматизированно проверены на корректность (например, все критерии должны быть оценены).

## Список технологий и типов данных:

- Оценки и комментарии хранятся в зашифрованной форме.
- Уведомления отправляются через API системы оповещений.

## Частота использования:

- Ожидается высокая активность экспертов в периоды окончания приёма заявок.

## Открытые вопросы:

- Нужно ли сохранять черновики оценок?
- Следует ли добавить автоматическое распределение заявок между экспертами на основе их специализации?
- Какой должна быть система мониторинга нагрузки на экспертов, чтобы избежать перегрузки?


# ApplicationSubmissionOperations.md

## Описание системных операций

Данный документ описывает системные операции, необходимые для реализации прецедента "Подача гранта". Каждая операция связана с компонентами диаграммы классов и включает в себя подробные шаги выполнения, предусловия, действия и результаты.

---

### **1. Операция: submitApplication(application: Application)**

#### **Ссылка**
- **Прецедент:** Подача заявки на грант.
- **Компонент:** `ApplicationManager`.

#### **Предусловия**
1. Пользователь (Applicant) аутентифицирован.

#### **Действия**
1. Метод `submitApplication` принимает объект заявки в качестве аргумента.
2. `ApplicationManager` сохраняет заявку в системе с атрибутами:
   - `ID`: Уникальный идентификатор заявки.
   - `Title`: Название заявки.
   - `Description`: Описание заявки.
   - `Status`: Текущий статус заявки.
   - `Applicant`: Ссылка на пользователя-заявителя.
3. Система отправляет уведомление о успешной подаче заявки.

#### **Постусловия**
- Заявка успешно подана и сохранена в системе.
- Уведомление о статусе отправлено заявителю.
---

### **2. Операция: sendNotification(notification: Notification)**

#### **Ссылка**
- **Прецедент:** Подача заявки на грант.
- **Компонент:** `NotificationManager`.

#### **Предусловия**
1. Заявка успешно подана или обновлена.
2. Уведомление сформировано.

#### **Действия**
1. Метод `sendNotification` принимает объект уведомления в качестве аргумента.
2. `NotificationManager` отправляет уведомление пользователю (заявителю) о статусе заявки или других важных событиях.

#### **Постусловия**
- Уведомление успешно отправлено пользователю

---

### **3. Операция: UserManager::login(username, password)**

#### **Ссылка**
- **Прецедент:** Подача заявки на грант.
- **Компонент:** `UserManager`.

#### **Предусловия**
1. Пользователь зарегистрирован в системе.
2. Указанные учетные данные (имя пользователя и пароль) должны соответствовать данным в системе.

#### **Действия**
1. Метод `login` принимает два аргумента:
   - `username`: Имя пользователя, используемое для аутентификации.
   - `password`: Пароль, связанный с указанным именем пользователя.
2. `UserManager` проверяет наличие пользователя с указанным именем в базе данных.
3. Если пользователь найден, система проверяет корректность введенного пароля.
4. В случае успешной аутентификации:
   - Система создает сессию для пользователя.
   - Возвращает объект пользователя с атрибутами:
     - ID: Уникальный идентификатор пользователя.
     - Name: Имя пользователя.
     - Role: Роль пользователя (например, Applicant).
     - Email: Email пользователя.
5. Если аутентификация не удалась:
   - Система возвращает сообщение об ошибке с указанием причины (например, "Неверное имя пользователя или пароль").

#### **Постусловия**
- Пользователь успешно вошел в систему и имеет доступ к функционалу, связанному с подачей заявок на гранты.
- В случае неудачной попытки входа система информирует пользователя о проблеме.

---

### **4. Операция: processPayment(applicationID: UUID, amount: Decimal)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `PaymentManager`.

#### **Предусловия**
1. Решение о выдаче гранта принято.
2. Сумма гранта определена.

#### **Действия**
1. Метод `processPayment` принимает:
   - `applicationID`: Идентификатор заявки.
   - `amount`: Сумма гранта.
2. `PaymentManager` создает объект `Payment`:
   - `ID`: Уникальный идентификатор платежа.
   - `Amount`: Сумма платежа.
   - `Status`: Статус платежа ("Обрабатывается").
   - `Date`: Дата начала транзакции.
3. После завершения транзакции статус платежа обновляется на "Успешно".

#### **Постусловия**
- Платеж успешно обработан.
- Лог операции сохранен.

---

### **5. Операция: updateApplication(applicationID: UUID, updatedApplication: Application)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `ApplicationManager`.

#### **Предусловия**
1. Решение о выдаче гранта принято.
2. Обновленный объект заявки доступен.

#### **Действия**
1. Метод `updateApplication` принимает:
   - `applicationID`: Идентификатор заявки.
   - `updatedApplication`: Обновленный объект заявки.
2. `ApplicationManager` обновляет статус заявки на "Одобрена".
3. Изменения сохраняются в системе.

#### **Постусловия**
- Заявка обновлена.
- Лог изменений сохранен.

---

### **6. Операция: sendNotification(notification: Notification)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `NotificationManager`.

#### **Предусловия**
1. Решение о выдаче гранта принято.
2. Уведомление сформировано.

#### **Действия**
1. Метод `sendNotification` принимает объект `Notification` с атрибутами:
   - `Message`: Текст уведомления.
   - `Recipient`: Заявитель.
   - `Date`: Дата отправки.
2. Уведомление отправляется пользователю через выбранный канал связи (например, e-mail или SMS).

#### **Постусловия**
- Уведомление доставлено заявителю.
- Лог уведомления сохранен.

---

### **7. Операция: generateReport(reportType: String, parameters: Map<String, Object>)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `ReportManager`.

#### **Предусловия**
1. Решение о выдаче гранта завершено.
2. Данные о заявках и платежах доступны в системе.

#### **Действия**
1. Метод `generateReport` принимает:
   - `reportType`: Тип отчета (например, "Выданные гранты").
   - `parameters`: Параметры фильтрации данных.
2. `ReportManager` собирает данные из `ApplicationManager` и `DecisionManager`.
3. Система формирует объект `Report`:
   - `ID`: Уникальный идентификатор отчета.
   - `Title`: Название отчета.
   - `Content`: Данные о заявках, решениях и платежах.
   - `GeneratedBy`: Пользователь, инициировавший генерацию отчета.
   - `Date`: Дата создания.

#### **Постусловия**
- Отчет успешно сформирован и сохранен для анализа.

---

### Общие замечания:
1. Все действия системы фиксируются в логах через `ReportManager`.
2. В случае возникновения ошибок, система уведомляет администратора через `NotificationManager`.
3. Связь между объектами (`Application`, `Decision`, `Notification`, `Payment`) обеспечивается через их уникальные идентификаторы (`UUID`)
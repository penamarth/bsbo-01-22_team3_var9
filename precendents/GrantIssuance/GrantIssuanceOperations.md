# GrantIssuanceOperations.md

## Описание системных операций

Данный документ описывает системные операции, необходимые для реализации прецедента "Выдача гранта". Каждая операция связана с компонентами диаграммы классов и включает в себя подробные шаги выполнения, предусловия, действия и результаты.

---

### **1. Операция: getApplicationByID(applicationID: UUID)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `ApplicationManager`.

#### **Предусловия**
1. Заявка существует в системе.
2. Пользователь (FundHolder) аутентифицирован и имеет права доступа к заявкам.

#### **Действия**
1. `ApplicationManager` принимает `applicationID` в качестве аргумента.
2. Метод `getApplicationByID` извлекает объект `Application` из хранилища.
3. Система возвращает объект заявки с атрибутами:
   - `ID`: Уникальный идентификатор заявки.
   - `Title`: Название заявки.
   - `Description`: Описание заявки.
   - `Status`: Текущий статус заявки.
   - `Applicant`: Ссылка на пользователя-заявителя.

#### **Постусловия**
- Объект заявки успешно извлечен для последующей обработки.

---

### **2. Операция: getEvaluation(applicationID: UUID)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `ExpertiseManager`.

#### **Предусловия**
1. Экспертная оценка заявки завершена.
2. Оценка сохранена в системе.

#### **Действия**
1. `ExpertiseManager` принимает `applicationID` в качестве аргумента.
2. Метод `getEvaluation` извлекает объект `Evaluation`, связанный с заявкой.
3. Система возвращает объект `Evaluation`:
   - `Score`: Результаты оценки.
   - `Comments`: Комментарии экспертов.
   - `Expert`: Эксперт, проводивший оценку.

#### **Постусловия**
- Объект оценки успешно извлечен для анализа держателем фонда.

---

### **3. Операция: makeDecision(applicationID: UUID, decision: Decision)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `DecisionManager`.

#### **Предусловия**
1. Держатель фонда завершил анализ заявки и экспертных оценок.
2. Заявка имеет статус "На рассмотрении".

#### **Действия**
1. Метод `makeDecision` принимает:
   - `applicationID`: Идентификатор заявки.
   - `decision`: Объект решения.
2. Система создает объект `Decision` с атрибутами:
   - `ID`: Уникальный идентификатор решения.
   - `DecisionType`: Тип решения ("Одобрено").
   - `Reason`: Обоснование принятого решения.
   - `Application`: Ссылка на заявку.
3. Решение сохраняется в системе.

#### **Постусловия**
- Решение успешно сохранено.
- Заявка подготовлена для обработки платежа.

---

### **4. Операция: processPayment(applicationID: UUID, amount: Decimal)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `PaymentManager`.

#### **Предусловия**
1. Решение о выдаче гранта принято.
2. Сумма гранта определена.

#### **Действия**
1. Метод `processPayment` принимает:
   - `applicationID`: Идентификатор заявки.
   - `amount`: Сумма гранта.
2. `PaymentManager` создает объект `Payment`:
   - `ID`: Уникальный идентификатор платежа.
   - `Amount`: Сумма платежа.
   - `Status`: Статус платежа ("Обрабатывается").
   - `Date`: Дата начала транзакции.
3. После завершения транзакции статус платежа обновляется на "Успешно".

#### **Постусловия**
- Платеж успешно обработан.
- Лог операции сохранен.

---

### **5. Операция: updateApplication(applicationID: UUID, updatedApplication: Application)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `ApplicationManager`.

#### **Предусловия**
1. Решение о выдаче гранта принято.
2. Обновленный объект заявки доступен.

#### **Действия**
1. Метод `updateApplication` принимает:
   - `applicationID`: Идентификатор заявки.
   - `updatedApplication`: Обновленный объект заявки.
2. `ApplicationManager` обновляет статус заявки на "Одобрена".
3. Изменения сохраняются в системе.

#### **Постусловия**
- Заявка обновлена.
- Лог изменений сохранен.

---

### **6. Операция: sendNotification(notification: Notification)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `NotificationManager`.

#### **Предусловия**
1. Решение о выдаче гранта принято.
2. Уведомление сформировано.

#### **Действия**
1. Метод `sendNotification` принимает объект `Notification` с атрибутами:
   - `Message`: Текст уведомления.
   - `Recipient`: Заявитель.
   - `Date`: Дата отправки.
2. Уведомление отправляется пользователю через выбранный канал связи (например, e-mail или SMS).

#### **Постусловия**
- Уведомление доставлено заявителю.
- Лог уведомления сохранен.

---

### **7. Операция: generateReport(reportType: String, parameters: Map<String, Object>)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `ReportManager`.

#### **Предусловия**
1. Решение о выдаче гранта завершено.
2. Данные о заявках и платежах доступны в системе.

#### **Действия**
1. Метод `generateReport` принимает:
   - `reportType`: Тип отчета (например, "Выданные гранты").
   - `parameters`: Параметры фильтрации данных.
2. `ReportManager` собирает данные из `ApplicationManager` и `DecisionManager`.
3. Система формирует объект `Report`:
   - `ID`: Уникальный идентификатор отчета.
   - `Title`: Название отчета.
   - `Content`: Данные о заявках, решениях и платежах.
   - `GeneratedBy`: Пользователь, инициировавший генерацию отчета.
   - `Date`: Дата создания.

#### **Постусловия**
- Отчет успешно сформирован и сохранен для анализа.

---

### Общие замечания:
1. Все действия системы фиксируются в логах через `ReportManager`.
2. В случае возникновения ошибок, система уведомляет администратора через `NotificationManager`.
3. Связь между объектами (`Application`, `Decision`, `Notification`, `Payment`) обеспечивается через их уникальные идентификаторы (`UUID`)
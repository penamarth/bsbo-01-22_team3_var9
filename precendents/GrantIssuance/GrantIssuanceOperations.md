# GrantIssuanceOperations.md

## Описание системных операций

Данный документ описывает системные операции, необходимые для реализации прецедента "Выдача гранта". Каждая операция связана с компонентами диаграммы классов и включает подробные шаги выполнения, предусловия, действия и результаты.

---

### **1. Операция: getApplicationByID(applicationID: UUID)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `ApplicationManager`.

#### **Предусловия**
1. Заявка существует в системе.
2. Пользователь (FundHolder) аутентифицирован и имеет права доступа к заявкам.

#### **Действия**
1. `ApplicationManager` принимает `applicationID` в качестве аргумента.
2. Метод `getApplicationByID` извлекает объект `Application` из хранилища данных.
3. Система возвращает объект заявки, включая следующие атрибуты:
   - `ID`: Уникальный идентификатор заявки.
   - `Title`: Название заявки.
   - `Description`: Описание заявки.
   - `Status`: Текущий статус заявки.
   - `Applicant`: Ссылка на пользователя, подавшего заявку.

#### **Постусловия**
- Объект `Application` успешно извлечен и передан для последующей обработки.

---

### **2. Операция: getEvaluation(applicationID: UUID)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `ExpertiseManager`.

#### **Предусловия**
1. Заявка прошла этап экспертной оценки.
2. Экспертные данные сохранены в системе.

#### **Действия**
1. `ExpertiseManager` принимает `applicationID` как аргумент.
2. Метод `getEvaluation` извлекает объект `Evaluation`, связанный с заявкой.
3. Система возвращает объект оценки:
   - `Score`: Балл заявки.
   - `Comments`: Комментарии экспертов.
   - `Expert`: Ссылка на эксперта.

#### **Постусловия**
- Объект `Evaluation` успешно извлечен для анализа держателем фонда.

---

### **3. Операция: makeDecision(applicationID: UUID, decision: Decision)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `DecisionManager`.

#### **Предусловия**
1. Держатель фонда завершил анализ заявки и экспертных оценок.
2. Заявка имеет статус "На рассмотрении".

#### **Действия**
1. Метод `makeDecision` принимает:
   - `applicationID`: Идентификатор заявки.
   - `decision`: Объект, содержащий данные о принятом решении.
2. Создается объект `Decision` с атрибутами:
   - `ID`: Уникальный идентификатор решения.
   - `DecisionType`: Тип решения ("Одобрено").
   - `Reason`: Обоснование решения.
   - `Application`: Ссылка на заявку.
3. Объект решения сохраняется в системе.

#### **Постусловия**
- Объект `Decision` успешно создан и сохранен.
- Решение зафиксировано в системе.

---

### **4. Операция: processPayment(applicationID: UUID, amount: Decimal)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `PaymentManager`.

#### **Предусловия**
1. Решение о выдаче гранта сохранено.
2. Сумма гранта определена.

#### **Действия**
1. Метод `processPayment` принимает:
   - `applicationID`: Идентификатор заявки.
   - `amount`: Сумма гранта.
2. `PaymentManager` инициирует обработку платежа и создает объект `Payment`:
   - `ID`: Уникальный идентификатор платежа.
   - `Amount`: Сумма платежа.
   - `Status`: Статус платежа ("Обрабатывается").
   - `Date`: Дата начала транзакции.
3. Система выполняет транзакцию и обновляет статус платежа на "Успешно".

#### **Постусловия**
- Платеж успешно обработан.
- Статус заявки подтвержден.

---

### **5. Операция: updateApplication(applicationID: UUID, updatedApplication: Application)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `ApplicationManager`.

#### **Предусловия**
1. Решение о выдаче гранта принято.
2. Обновленный объект заявки доступен.

#### **Действия**
1. Метод `updateApplication` принимает:
   - `applicationID`: Идентификатор заявки.
   - `updatedApplication`: Обновленный объект заявки.
2. `ApplicationManager` обновляет статус заявки на "Одобрена".
3. Изменения сохраняются в системе.

#### **Постусловия**
- Статус заявки обновлен.
- Лог изменений сохранен для аудита.

---

### **6. Операция: sendNotification(notification: Notification)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `NotificationManager`.

#### **Предусловия**
1. Решение о выдаче гранта принято.
2. Уведомление сформировано.

#### **Действия**
1. Метод `sendNotification` принимает объект `Notification` с атрибутами:
   - `Message`: Сообщение о решении ("Ваша заявка одобрена").
   - `Recipient`: Пользователь, связанный с заявкой.
   - `Date`: Дата отправки уведомления.
2. Уведомление отправляется пользователю через выбранный канал связи (e-mail, SMS).

#### **Постусловия**
- Уведомление доставлено заявителю.
- Лог уведомления сохранен для дальнейшего анализа.

---

### **7. Операция: generateReport(reportType: String, parameters: Map<String, Object>)**

#### **Ссылка**
- **Прецедент:** Выдача гранта.
- **Компонент:** `ReportManager`.

#### **Предусловия**
1. Система содержит данные о заявках и решениях.

#### **Действия**
1. Метод `generateReport` принимает:
   - `reportType`: Тип отчета (например, "Выданные гранты").
   - `parameters`: Фильтры для выборки данных.
2. `ReportManager` собирает данные из `ApplicationManager` и `DecisionManager`.
3. Система создает объект `Report`:
   - `ID`: Уникальный идентификатор отчета.
   - `Title`: Заголовок отчета.
   - `Content`: Список одобренных заявок.
   - `GeneratedBy`: Пользователь, инициировавший отчет.
   - `Date`: Дата создания отчета.

#### **Постусловия**
- Отчет успешно создан и доступен для анализа.

---

### Общие замечания:
1. Все операции логируются через `ReportManager` для аудита.
2. Ошибки при выполнении операций фиксируются и отправляются администраторам через `NotificationManager`.
3. Связь между объектами (`Application`, `Decision`, `Notification`, `Payment`) обеспечивается через их уникальные идентификаторы (`UUID`)